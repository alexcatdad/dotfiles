# Modern CLI Tool Enhancements
# Load after package installations to override defaults with better tools

# Modern CLI replacements (conditional aliases)
if command -v bat &> /dev/null; then
    alias cat='bat'
    alias catp='bat --style=plain'  # Plain cat when needed
    alias bathelp='bat --help'
fi

if command -v exa &> /dev/null; then
    alias ls='exa --icons'
    alias ll='exa -la --icons --git'
    alias tree='exa --tree --icons'
    alias ltree='exa --tree --icons -L 2'
fi

if command -v fd &> /dev/null; then
    alias find='fd'
    alias fdf='fd --type f'  # files only
    alias fdd='fd --type d'  # directories only
fi

if command -v rg &> /dev/null; then
    alias grep='rg'
    alias rgi='rg -i'  # case insensitive
    alias rgf='rg --files-with-matches'  # just filenames
fi

# Zoxide integration (smart cd replacement)
if command -v zoxide &> /dev/null; then
    eval "$(zoxide init zsh)"
    alias cd='z'
    alias cdi='zi'  # interactive selection
    alias zz='z -'  # go back
fi

# Starship prompt (if installed)
if command -v starship &> /dev/null; then
    eval "$(starship init zsh)"
fi

# Direnv integration (environment switching)
if command -v direnv &> /dev/null; then
    eval "$(direnv hook zsh)"
fi

# FZF enhancements
if command -v fzf &> /dev/null; then
    # Better file preview with bat
    if command -v bat &> /dev/null; then
        export FZF_DEFAULT_OPTS="--preview 'bat --color=always --style=numbers --line-range=:500 {}'"
    fi

    # Use fd for fzf if available
    if command -v fd &> /dev/null; then
        export FZF_DEFAULT_COMMAND='fd --type f'
        export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
        export FZF_ALT_C_COMMAND='fd --type d'
    fi

    # Key bindings
    [ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
fi

# Git extras shortcuts (if installed)
if command -v git-summary &> /dev/null; then
    alias gsum='git summary'
    alias geff='git effort'
    alias gline='git line-summary'
    alias ginfo='git info'
fi

# GitHub CLI shortcuts
if command -v gh &> /dev/null; then
    alias ghpr='gh pr create'
    alias ghprs='gh pr status'
    alias ghprl='gh pr list'
    alias ghrp='gh repo view'
fi

# Hyperfine (benchmarking)
if command -v hyperfine &> /dev/null; then
    alias bench='hyperfine'
    alias quickbench='hyperfine --warmup 3'
fi

# Just (command runner)
if command -v just &> /dev/null; then
    alias j='just'
    alias jl='just --list'
fi

# Navi (interactive cheatsheets)
if command -v navi &> /dev/null; then
    alias cheat='navi'
    alias naviquery='navi --query'
fi

# Enhanced system monitoring
if command -v glances &> /dev/null; then
    alias top='glances'
    alias systop='glances'
fi

if command -v bandwhich &> /dev/null; then
    alias nettop='sudo bandwhich'
fi

# LazyGit
if command -v lazygit &> /dev/null; then
    alias lg='lazygit'
fi

# HTTPie enhancements
if command -v http &> /dev/null; then
    alias curl='http'  # Use httpie for simple requests
    alias curlold='command curl'  # Keep original curl available
fi

# TLDR enhanced help
if command -v tldr &> /dev/null; then
    alias help='tldr'
    alias man='tldr'
    alias manold='command man'  # Keep original man available
fi